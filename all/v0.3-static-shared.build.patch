diff --git a/CMakeLists.txt b/CMakeLists.txt
index ee9b58c..2b5406d 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -48,11 +48,13 @@ option(LIBRDTSC_USE_PMU     "Enables PMU usage on ARM platforms"        OFF)
 # |          Library Build and Install Properties          |
 # +--------------------------------------------------------+
 
-add_library(rdtsc SHARED
-    src/cycles.c
-    src/common_timer.c
-    src/timer.c
-)
+if (NOT BUILD_SHARED_LIBS)
+  add_library(rdtsc src/cycles.c src/common_timer.c src/timer.c)
+else()
+  add_library(rdtsc SHARED src/cycles.c src/common_timer.c src/timer.c)
+endif ()
+
+
 
 set_target_properties(rdtsc PROPERTIES
   VERSION   ${LIBRDTSC_VERSION}

diff --git a/CMakeLists.txt b/CMakeLists.txt
index ee9b58c..c957b88 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -28,6 +28,11 @@ project(librdtsc
   DESCRIPTION "A library to read the TSC on multiple platforms."
 )
 
+if(CMAKE_CXX_COMPILER_ID MATCHES "Clang" AND CMAKE_CXX_COMPILER_VERSION VERSION_GREATER_EQUAL "16.0")
+  add_compile_options(-Wno-error=implicit-function-declaration)
+endif()
+
+
 
 # +--------------------------------------------------------+
 # |                 Compilation variables                  |
@@ -48,11 +53,13 @@ option(LIBRDTSC_USE_PMU     "Enables PMU usage on ARM platforms"        OFF)
 # |          Library Build and Install Properties          |
 # +--------------------------------------------------------+
 
-add_library(rdtsc SHARED
-    src/cycles.c
-    src/common_timer.c
-    src/timer.c
-)
+if (NOT BUILD_SHARED_LIBS)
+  add_library(rdtsc src/cycles.c src/common_timer.c src/timer.c)
+else()
+  add_library(rdtsc SHARED src/cycles.c src/common_timer.c src/timer.c)
+endif ()
+
+
 
 set_target_properties(rdtsc PROPERTIES
   VERSION   ${LIBRDTSC_VERSION}
